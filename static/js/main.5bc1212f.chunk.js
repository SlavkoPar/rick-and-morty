(this["webpackJsonprick-and-morty"]=this["webpackJsonprick-and-morty"]||[]).push([[0],{77:function(e,t,n){e.exports=n(95)},82:function(e,t,n){},83:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(65),i=n.n(o),l=(n(82),n(83),n(27)),c=n(8),u=n(10),s=n(13);function d(){var e=Object(u.a)(['\n\tposition: "fixed";\n\tbottom: 20;\n\tright: 20;\n\tzIndex: 1999;\n\tborder-width: 1px;\n\tborder-radius: 15px;\n\twidth: 30px;\n\theight: 30px;\n']);return d=function(){return e},e}s.a.button(d());var p=n(21),v=n(2),m=n(75),f=n(24),g=n(74),h=n(72);function E(e){var t=e.searchTerm,n=e.onSearch,o=Object(r.useState)(t),i=Object(f.a)(o,2),l=i[0],c=i[1],u=Object(h.debounce)((function(e){return n(e)}),1e3);return a.a.createElement("input",{type:"text",placeholder:"Search",value:l,onChange:function(e){c(e.target.value),u(e.target.value)}})}var b=n(76);var x=function(e){var t=e.loading,n=e.children;return t?a.a.createElement("div",{style:{display:"flex",justifyContent:"center",flexGrow:"1"}},"Loading ..."):a.a.createElement(a.a.Fragment,null,n)||null};function y(){var e=Object(u.a)(["\n\tdisplay: flex;\n\tjustify-content: ","; \n\tflex: ",";\n\t","\n"]);return y=function(){return e},e}function j(){var e=Object(u.a)(["\n\tdisplay: flex;\n\tborder-bottom: 1px solid silver;\n\tbackground:  ",";\n\tpadding: 5px 10px;\n\t:hover { background-color: #f5f5f5; }\n\t:nth-child(even) { background-color: #f2f2f2; }\n"]);return j=function(){return e},e}function O(){var e=Object(u.a)(["\n\tdisplay: flex;\n\tborder-bottom: 1px solid silver;\n\talign-items: center;\n\tbackground:  ",";\n\tpadding: 5px 10px;\n\tcolor: white;\n\theight: 30px;\n"]);return O=function(){return e},e}function w(){var e=Object(u.a)(["\n"]);return w=function(){return e},e}var k=s.a.div(w()),A=s.a.div(O(),(function(e){var t;return null!==(t=e.background)&&void 0!==t?t:"transparent"})),C=s.a.div(j(),(function(e){var t;return null!==(t=e.background)&&void 0!==t?t:"transparent"})),z={xs:function(e){return"\n\t\t@media only screen and (max-width: 480px) {\n\t\t\t".concat(e,"\n\t\t}\n\t")}},I=s.a.div(y(),(function(e){var t;return null!==(t=e.justifyContent)&&void 0!==t?t:"flex-start"}),(function(e){return e.size}),(function(e){return e.collapse&&z[e.collapse]("\n\t\tdisplay : none;\n\t")}));var S=function(e){var t=e.items,n=void 0===t?[]:t,r=e.renderItem,o=e.loading,i=(e.hasNextPage,Object(b.a)(e,["items","renderItem","loading","hasNextPage"]),n.length),l=Boolean(o&&!i);return a.a.createElement(x,{loading:l},null===n||void 0===n?void 0:n.map((function(e,t){return e?r(e,t):null})),o?a.a.createElement(C,null,a.a.createElement(I,null,a.a.createElement(x,{loading:o}))):null)};function N(e){var t=e.id,n=e.name,o=e.air_date,i=e.episode,c=e.characters,u=function(){var e=Object(r.useState)({isHovered:!1}),t=Object(f.a)(e,2),n=t[0],a=t[1],o=Object(r.useRef)(null),i=function(){return a({isHovered:!0})},l=function(){return a({isHovered:!1})};return Object(r.useEffect)((function(){var e=o.current;if(e)return e.addEventListener("mouseenter",(function(){return i()})),e.addEventListener("mouseleave",(function(){return l()})),function(){e.removeEventListener("mouseenter",(function(){return i()})),e.removeEventListener("mouseleave",(function(){return l()}))}}),[o.current]),[o,n]}(),s=Object(f.a)(u,2),d=s[0],p=s[1];return a.a.createElement(C,null,a.a.createElement(I,{size:5},a.a.createElement(l.b,{to:"/episode/".concat(t)},t," ",n)),a.a.createElement(I,{size:2,collapse:"xs"},i),a.a.createElement(I,{size:3,collapse:"xs"},o),a.a.createElement(I,{size:3,justifyContent:"center"},a.a.createElement("div",{ref:d,style:{position:"relative"}},"#",c.length,p.isHovered&&a.a.createElement("button",{className:"show-more",title:"Show characters",onClick:function(){}},"Show"))))}function P(e){return e.id?a.a.createElement(N,Object.assign({key:e.id},e)):null}var L=function(e){var t=e.episodes,n=e.loading,r=e.hasNextPage;return a.a.createElement(S,{items:t,loading:n,hasNextPage:r,renderItem:P},");")},$=n(73);function q(){var e=Object(u.a)(["\n\tborder: '1px solid silver';\n\tborder-top-width: 0;\n\toverflow-y: auto;\n\theight: 500px;\n"]);return q=function(){return e},e}function M(){var e=Object(u.a)(["\n\tposition: 'relative';\n\tbackground-color: gainsboro;\n\tborder-radius: 10px;\n\tbox-shadow: 3px 3px 25px -5px rgba(0,0,0,0.47);\n\tcolor: #1A1A1A;\n\tdisplay: inline-block;\n\tmargin: 20px 15px;\n\twidth: 98%;\n\toverflow: hidden;\n"]);return M=function(){return e},e}function D(){var e=Object(u.a)(["\n\tquery episodes($page: Int, $filter: String) {\n\t\tepisodes(page: $page, filter: { name: $filter }) {\n\t\t\tresults {\n\t\t\t\tid\n\t\t\t\tname\n\t\t\t\tepisode\n\t\t\t\tair_date\n\t\t\t\tcharacters {\n\t\t\t\t\tid\n\t\t\t\t}\n\t\t\t}\n\t\t\tinfo {\n\t\t\t\tnext\n\t\t\t}\n\t\t}\n\t}\n"]);return D=function(){return e},e}var H=Object(p.gql)(D()),R=s.a.div(M()),B=s.a.div(q());function Q(){var e,t=Object(r.useState)(""),n=Object(f.a)(t,2),o=n[0],i=n[1],l=Object(p.useQuery)(H,{variables:{page:1,filter:o}}),c=l.loading,u=l.error,s=l.data,d=l.fetchMore;if(u)return a.a.createElement("p",null,"Error :(");var v=(s||{}).episodes;console.log("Episodes:",v);var h=null===v||void 0===v?void 0:v.results,b=null===v||void 0===v||null===(e=v.info)||void 0===e?void 0:e.next,x=!!b;console.log("hasNextPage: ",x);var y=Object($.a)({loading:c,hasNextPage:x,onLoadMore:function(){console.log("handleLoadMore"),d({variables:{page:b,filter:o},updateQuery:function(e,t){var n=t.fetchMoreResult,r=null===n||void 0===n?void 0:n.episodes;return console.log("prevResult:",e),console.log("newEpisodes:",r),Object(g.a)(e,(function(e){var t,n=e.episodes;(null===n||void 0===n?void 0:n.results)&&(null===n||void 0===n?void 0:n.info)&&(null===r||void 0===r?void 0:r.results)&&((t=n.results).push.apply(t,Object(m.a)(r.results)),n.info=r.info)}))}})},scrollContainer:"parent"});return a.a.createElement(R,null,a.a.createElement("div",{style:{padding:"5px 10px",width:"20%"}},a.a.createElement(E,{searchTerm:o,onSearch:function(e){return i(e)}})),a.a.createElement(k,null,a.a.createElement(A,{background:"gray"},a.a.createElement(I,{size:5},"EPISODE"),a.a.createElement(I,{size:2,collapse:"xs"},"CODE"),a.a.createElement(I,{size:3,collapse:"xs"},"AIR DATE"),a.a.createElement(I,{size:3,justifyContent:"center"},"#Characters"))),a.a.createElement(B,null,a.a.createElement(k,{ref:y},a.a.createElement(L,{episodes:h,loading:c,hasNextPage:x}))))}function T(e){var t=e.id,n=e.name,r=e.episode,o=e.image;return a.a.createElement("div",{key:t,className:"item"},a.a.createElement("img",{alt:"Actor",style:{width:120,height:120},src:o}),a.a.createElement("div",null,n),a.a.createElement("div",null,"Episodes: ",r.length))}n(94);function _(e){var t=e.characters;return a.a.createElement("div",{className:"container"},t.map((function(e){return a.a.createElement(T,Object.assign({key:e.id},e))})))}function F(){var e=Object(u.a)(["\n\tquery episode($id: ID!) {\n\t\tepisode(id: $id) {\n\t\t\tid\n\t\t\tname\n\t\t\tair_date\n\t\t\tepisode\n\t\t\t created\n\t\t\tcharacters {\n\t\t\t  id\n\t\t\t  name\n\t\t\t  status\n\t\t\t  species\n\t\t\t  gender\n\t\t\t  location {\n\t\t\t\t name\n\t\t\t  }\n\t\t\t  image\n\t\t\t  created\n\t\t\t  episode {\n\t\t\t\t  id\n\t\t\t  }\n\t\t }\n\t\n\t\t}\n\t}\n"]);return F=function(){return e},e}function J(){var e=Object(u.a)(["\n  padding: 0 15px;\n"]);return J=function(){return e},e}function W(){var e=Object(u.a)(["\n  font-size: 1.66rem;\n"]);return W=function(){return e},e}function G(){var e=Object(u.a)(["\n\tposition: 'relative'\n\tbackground-color: gainsboro;\n\tborder-radius: 10px;\n\tbox-shadow: 3px 3px 25px -5px rgba(0,0,0,0.47);\n\tcolor: #1A1A1A;\n\tdisplay: inline-block;\n\tmargin: 20px 15px;\n\tmmmax-width: 300px;\n\toverflow: hidden;\n"]);return G=function(){return e},e}var K=s.a.div(G()),U=s.a.div(W()),V=s.a.div(J()),X=Object(p.gql)(F());function Y(){var e=Object(c.f)().id,t=Object(p.useQuery)(X,{variables:{id:e}}),n=t.loading,r=t.error,o=t.data;if(o&&console.log("data",o),n)return a.a.createElement("p",null,"Loading...");if(r)return a.a.createElement("p",null,"Error :(");var i=o.episode,u=i.name,s=i.air_date,d=i.episode,v=i.characters;return a.a.createElement(K,null,a.a.createElement(V,null,a.a.createElement(U,null,u),a.a.createElement("div",null,d),a.a.createElement("div",null,"AIR DATE: ",s)),a.a.createElement("h4",{style:{padding:"0px 15px"}},"Characters"),a.a.createElement(_,{characters:v}),a.a.createElement("div",{style:{position:"absolute",right:"30px",top:"30px"}},a.a.createElement(l.b,{to:"/"},"Back to Episodes")))}var Z=new p.ApolloClient({uri:"https://rickandmortyapi.com/graphql",cache:new p.InMemoryCache({typePolicies:{Query:{fields:{search:Object(v.H)(["query"])}}}})});var ee=function(){return a.a.createElement(l.a,null,a.a.createElement(p.ApolloProvider,{client:Z},a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement(c.c,null,a.a.createElement(c.a,{path:"/episode/:id"},a.a.createElement(Y,null)),a.a.createElement(c.a,{path:"/"},a.a.createElement(Q,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[77,1,2]]]);
//# sourceMappingURL=main.5bc1212f.chunk.js.map